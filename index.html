<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>게시판</title>
    <style>
        /* 필요한 CSS 스타일 */
        #imagePreviewContainer {
            display: none;
        }
        #removeImageButton {
            display: none;
        }
        #searchResult {
            margin-top: 20px;
        }
    </style>
</head>
<body>

    <!-- 태그 선택 (하나만 선택 가능) -->
    <label for="tags">태그 선택:</label>
    <select id="tags" onchange="updateSelectedTags()">
        <option value="tag1">태그 1</option>
        <option value="tag2">태그 2</option>
        <option value="tag3">태그 3</option>
    </select>
    <p id="selectedTags">선택된 태그 없음</p>

    <!-- 이미지 업로드 -->
    <input type="file" id="imageInput" onchange="previewImage(event)" />
    <div id="imagePreviewContainer">
        <img id="imagePreview" src="" alt="Image preview" width="200" />
        <button type="button" id="removeImageButton" onclick="removeImage()">이미지 삭제</button>
    </div>

    <!-- 게시글 검색 기능 -->
    <div>
        <label for="search">게시글 검색:</label>
        <input type="text" id="search" oninput="searchPosts()" placeholder="게시글 제목 또는 태그 입력" />
    </div>
    <div id="searchResult"></div>

    <!-- JavaScript 코드 -->
    <script>
        // 태그 업데이트 함수
        function updateSelectedTags() {
            const select = document.getElementById('tags');
            const selectedTag = select.options[select.selectedIndex].text;
            document.getElementById('selectedTags').textContent = `선택된 태그: ${selectedTag}`;
        }

        // 이미지 미리보기 함수
        function previewImage(event) {
            const input = event.target;
            const imagePreviewContainer = document.getElementById('imagePreviewContainer');
            const imagePreview = document.getElementById('imagePreview');
            const removeImageButton = document.getElementById('removeImageButton');

            if (input.files && input.files[0]) {
                const reader = new FileReader();

                reader.onload = function (e) {
                    imagePreview.src = e.target.result;
                    imagePreviewContainer.style.display = 'block';
                    removeImageButton.style.display = 'inline';
                };

                reader.readAsDataURL(input.files[0]);
            } else {
                imagePreviewContainer.style.display = 'none';
                removeImageButton.style.display = 'none';
            }
        }

        // 이미지 삭제 함수
        function removeImage() {
            const input = document.getElementById('imageInput');
            const imagePreviewContainer = document.getElementById('imagePreviewContainer');
            const imagePreview = document.getElementById('imagePreview');

            input.value = '';  // 파일 입력 초기화
            imagePreview.src = '';  // 이미지 미리보기 초기화
            imagePreviewContainer.style.display = 'none';
        }

        // 게시글 검색 함수
        const posts = [
            { title: "첫 번째 게시글", tags: ["태그 1", "태그 2"], content: "첫 번째 게시글 내용입니다." },
            { title: "두 번째 게시글", tags: ["태그 3", "태그 4"], content: "두 번째 게시글 내용입니다." }
        ];

        function searchPosts() {
            const searchValue = document.getElementById('search').value.toLowerCase();
            const searchResult = document.getElementById('searchResult');
            searchResult.innerHTML = '';

            const filteredPosts = posts.filter(post => {
                return post.title.toLowerCase().includes(searchValue) ||
                       post.tags.some(tag => tag.toLowerCase().includes(searchValue));
            });

            if (filteredPosts.length > 0) {
                filteredPosts.forEach(post => {
                    const postElement = document.createElement('div');
                    postElement.innerHTML = `<h3>${post.title}</h3><p>${post.content}</p><p>태그: ${post.tags.join(", ")}</p>`;
                    searchResult.appendChild(postElement);
                });
            } else {
                searchResult.innerHTML = '검색 결과 없음';
            }
        }
    </script>

</body>
</html>
